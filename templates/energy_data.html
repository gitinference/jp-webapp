<!DOCTYPE html>
{% load static %}
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <title>Datos Energéticos</title>

    <!-- Favicons -->
    <link rel="icon" type="image/x-icon" href="{% static 'images/favicon.ico' %}" />
    <link rel="apple-touch-icon" href="{% static 'images/favicon-16x16.png' %}" />
    <link rel="apple-touch-icon" href="{% static 'images/favicon-32x32.png' %}" />
    <link rel="apple-touch-icon" href="{% static 'images/android-chrome-192x192.png' %}" />
    <link rel="apple-touch-icon" href="{% static 'images/android-chrome-512x512.png' %}" />

    <!-- CSS comunes -->
    <link rel="stylesheet" href="{% static 'css/indicadores.css' %}">
    <link rel="stylesheet" href="{% static 'css/website.css' %}">

    <!-- JS -->
    <script> window.API_URL = "{{ api|escapejs }}";</script>
    <script src="{% static 'js/exportcsv.js' %}" defer></script>

    <!-- Ajustes de alineación: centro pero texto alineado a la izquierda dentro del contenedor -->
    <style>
        .content-wrapper {
            max-width: 2000px; 
            margin: 0 auto;  
            padding: 0 1rem;
        }
        .content-wrapper * {
            text-align: left;
        }
        
        #vis.vega-embed,
        #graph {
            width: 100%;
            margin-top: 18px; 
        }
        .content-wrapper h1,
        .content-wrapper .main_content {
            margin-left: 0 !important;
            padding-left: 0 !important;
        }
        .graph_container h2 {
            text-align: left;
            margin-left: 0;
        }
    </style>
</head>

<body>
    <!-- NAVIGATION -->
    <div class="container">
        <div class="burger" onclick="toggleBurgerMenu()">
            <span></span>
            <span></span>
            <span></span>
        </div>
        <ul class="burger_menu">
            <li><a href="/">Home</a></li>
            <strong><li><a href="/proyectos/">Proyectos</a></li></strong>
            <li><a href="/productos_ranking/">Ranking de Products HTS</a></li>
            <li><a href="/ingresos-de-empleos/">Ingresos de Empleos</a></li>
            <li><a href="/indice-al-consumidor/">Indice al Consumidor</a></li>
            <li><a href="/awards/">Awards</a></li>
        </ul>

        <img src="{% static 'images/gobierno_de_puerto_rico.png' %}" alt="Logo del Gobierno de Puerto Rico" id="logo" />
    </div>

<div class="content-wrapper">
<main>
    <!-- TÍTULO -->
    <section>
        <h1>Datos Energéticos</h1>
    </section>

    <!-- INTRODUCCIÓN -->
    <section>
        <p class="main_content">
            En esta sección se presentan estadísticas de generación, demanda y precios de
            energía en Puerto Rico. Utilice los controles para elegir la métrica y el período;
            la gráfica se actualizará automáticamente.
        </p>
    </section>

    <form method="post" id="energy-form">
        {% csrf_token %}
        <div class="graph_container">
            <h2>Datos de energía</h2>
            <section id="buttons">
            <label for="period">Frecuencia: </label>
            <select name="period" id="period">
                <option value="monthly"   {% if period == 'monthly'   %}selected{% endif %}>Mensual</option>
                <option value="quarterly" {% if period == 'quarterly' %}selected{% endif %}>Trimestral</option>
                <option value="yearly"    {% if period == 'yearly'    %}selected{% endif %}>Anual</option>
                <option value="fiscal"    {% if period == 'fiscal'    %}selected{% endif %}>Fiscal</option>
            </select>

            <!-- Métrica -->
            <label for="metric">Métrica:</label>
            <select name="metric" id="metric">
                {% for m in energy_metrics %}
                <option value="{{ m.value }}">{{ m.label }}</option>
                {% endfor %}
            </select>

            <button type="submit" id="submit">Submit</button>
            </section>
            <!-- Aquí entra el HTML del gráfico -->
            <div id="graph">
                {{ graph|safe }}
            </div>
        </div>
    </form>
</main>
        <div class="download_container">
            <button type="button" id="submit" onclick="downloadCSV('frequency','metric','files/index/energy')"
                    title="Descargar archivo CSV Energy data"> Descargar CSV </button>
        </div>

<!-- ---------- FOOTER ----------- -->
<footer>
    <main>
        <section><h1>Contáctanos</h1></section>
        <section>
            <div class="footer-container">
                <div class="left-container"><!-- … contactos … --></div>
                <div class="right-container"><!-- … direcciones … --></div>
            </div>
        </section>
    </main>
</footer>

<script src="{% static 'js/header_menu.js' %}" defer></script>
</body>
</html>
